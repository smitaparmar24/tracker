<!DOCTYPE html>
<html>

<head>
    <title>Get User Location</title>
</head>

<body>
    <h2>Getting Your Location...</h2>

    <script>
        navigator.geolocation.getCurrentPosition(
            (position) => {
                const lat = position.coords.latitude;
                const lon = position.coords.longitude;

                fetch('/location', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        latitude: lat,
                        longitude: lon
                    })
                })
                    .then(() => {
                        document.body.innerHTML = `<h3>Location sent: (${lat}, ${lon})</h3>`;
                    })
                    .catch((error) => {
                        document.body.innerHTML = `<p>Error sending location: ${error}</p>`;
                    });
            },
            (error) => {
                document.body.innerHTML = `<p>Permission denied or error: ${error.message}</p>`;
            }
        );
    </script>
</body>

</html>